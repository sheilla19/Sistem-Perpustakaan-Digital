<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard User</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body class="user-body">
    <div class="container-fluid py-3 shadow-sm bg-white sticky-top">
        <div class="d-flex justify-content-between align-items-center container">
            <h5 class="mb-0 text-success fw-bold">Dashboard User</h5>
            <div>
                <span class="me-3">Selamat datang, Sheilla Cantika</span>
                <a href="index.html" class="btn btn-outline-secondary btn-sm">Keluar</a>
            </div>
        </div>
    </div>

    <div class="container my-5">
        <div class="row g-3 mb-5" id="user-stats">
            <div class="col-lg-3 col-md-6">
                <div class="dashboard-card card-tersedia">
                    <h2 id="stat-total-stok">0</h2><p class="mb-0">Total Stok Buku</p><small>Tersedia untuk dipinjam</small>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="dashboard-card card-dipinjam">
                    <h2 id="stat-user-dipinjam">0</h2><p class="mb-0">Buku Dipinjam</p><small>Buku yang sedang Anda pinjam</small>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="dashboard-card card-menunggu">
                    <h2 id="stat-user-pending">0</h2><p class="mb-0">Menunggu Persetujuan</p><small>Permintaan sedang diproses</small>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="dashboard-card bg-secondary">
                    <h2 id="stat-user-riwayat">0</h2><p class="mb-0">Riwayat Pinjam</p><small>Lihat dan beri ulasan</small>
                </div>
            </div>
        </div>
        
        <ul class="nav nav-tabs nav-user mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#pills-katalog" type="button"><i class="bi bi-grid-3x3-gap me-2"></i>Katalog Buku</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#pills-riwayat" type="button"><i class="bi bi-clock-history me-2"></i>Riwayat Pinjam</button></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane fade show active" id="pills-katalog" role="tabpanel">
                <div class="input-group mb-5">
                    <input type="text" class="form-control form-control-lg" placeholder="Cari buku berdasarkan judul, penulis, atau kategori..." id="search-input">
                    <button class="btn btn-success btn-lg" type="button" id="search-button"><i class="bi bi-search"></i></button>
                </div>

                <h2 class="mb-4 text-dark">Katalog Buku (<span id="count-katalog">0</span> judul)</h2>
                <div class="row g-4" id="katalog-buku-container">
                    </div>
            </div>
            
            <div class="tab-pane fade bg-white p-4 rounded shadow-sm" id="pills-riwayat" role="tabpanel">
                <h4 class="mb-4">Riwayat Peminjaman (<span id="count-riwayat">0</span> buku selesai)</h4>
                <div class="table-responsive">
                    <table class="table table-striped align-middle">
                        <thead><tr><th>Judul Buku</th><th>Tanggal Pinjam</th><th>Tanggal Kembali</th><th>Ulasan Anda</th><th>Aksi</th></tr></thead>
                        <tbody id="table-riwayat-body">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="pinjamModal" tabindex="-1">
        <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Konfirmasi Peminjaman</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
                <div class="modal-body">
                    <p>Anda akan mengajukan peminjaman buku: **<span id="judulBukuPinjam"></span>**.</p>
                    <p class="mt-3">Permintaan akan dikirim ke Admin untuk disetujui. </p>
                    <div class="alert alert-warning mt-3">**Batas Peminjaman:** Maksimal 7 hari.</div>
                    <div class="modal-footer px-0 pb-0">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="button" class="btn btn-success" id="btn-konfirmasi-pinjam">Ajukan Pinjam Sekarang</button>
                    </div>
                    <input type="hidden" id="pinjam-book-id">
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="ulasanModal" tabindex="-1">
        <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="ulasanModalLabel">Beri Ulasan</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
                <div class="modal-body">
                    <p class="mb-3">Ulasan untuk buku: **<span id="ulasan-judul-buku"></span>**</p>
                    <div class="mb-3">
                        <label for="ulasan-text" class="form-label">Tulis Ulasan Anda (maks 250 karakter)</label>
                        <textarea class="form-control" id="ulasan-text" rows="4" maxlength="250" required></textarea>
                    </div>
                    <button type="button" class="btn btn-primary w-100" id="btn-konfirmasi-ulasan">Kirim Ulasan</button>
                    <input type="hidden" id="ulasan-pinjam-id">
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script> </body>
</html>